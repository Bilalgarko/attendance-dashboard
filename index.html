<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Class Attendance System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: linear-gradient(135deg, #134e1a 0%, #e9f5e1 100%);
            margin: 0; 
            padding: 0; 
            min-height: 100vh;
        }
        .container { 
            max-width: 400px; 
            margin: 40px auto; 
            background: #fff;
            padding: 30px 40px 40px 40px; 
            border-radius: 16px; 
            box-shadow: 0 4px 24px rgba(19, 78, 26, 0.18), 0 0px 0px #134e1a;
            border: 2px solid #1c6e34;
        }
        .wide-container {
            max-width: 900px;
        }
        h2 { text-align: center; color: #134e1a; }
        label { display: block; margin-top: 18px; margin-bottom: 6px; color: #134e1a; font-weight: 500;}
        input, select { 
            width: 100%; 
            padding: 9px; 
            border: 1.5px solid #1c6e34; 
            border-radius: 5px; 
            background: #e9f5e1;
            color: #134e1a;
        }
        input:focus, select:focus {
            outline: 2px solid #1c6e34;
            background: #d8f3c5;
        }
        button { 
            width: 100%; 
            background: #134e1a; 
            color: #fff; 
            border: none; 
            padding: 12px; 
            border-radius: 5px; 
            margin-top: 18px; 
            font-size: 16px; 
            cursor: pointer; 
            box-shadow: 0 2px 6px rgba(19, 78, 26, 0.12);
            transition: background 0.2s;
        }
        button:hover, .profile-edit-btn:hover { background: #208b3a;}
        .hidden { display: none; }
        .success { color: #178a42; text-align: center; margin-top: 20px;}
        .error { color: #ac2626; text-align: center; margin-top: 10px;}
        .attendance-table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-top: 20px;
            background: #f3fcf7;
        }
        .attendance-table th, .attendance-table td { 
            padding: 8px; 
            border: 1.2px solid #1c6e34; 
            text-align: center;
        }
        .attendance-table th { background: #daf5d7; color: #134e1a;}
        .dashboard-links { text-align: center; margin-bottom: 20px;}
        .dashboard-links a { margin: 0 7px; color: #208b3a; text-decoration: underline; cursor: pointer;}
        .admin-section { 
            background: #eafaea; 
            border: 1.5px solid #178a42; 
            padding: 18px; 
            border-radius: 12px; 
            margin-top: 30px;
        }
        .profile-section {
            display: flex;
            align-items: center;
            margin-bottom: 18px;
            background: #daf5d7;
            border-radius: 11px;
            padding: 12px;
            border: 1px solid #1c6e34;
        }
        .profile-photo {
            width: 72px;
            height: 72px;
            object-fit: cover;
            border-radius: 50%;
            border: 2.5px solid #208b3a;
            margin-right: 16px;
            background: #e9f5e1;
        }
        .profile-edit-btn {
            background: #208b3a;
            color: #fff;
            border: none;
            padding: 8px 14px;
            border-radius: 6px;
            cursor: pointer;
            width: auto;
            margin-left: 10px;
            font-size: 13px;
            box-shadow: 0 1px 3px rgba(19,78,26,0.08);
            transition: background 0.2s;
        }
        .profile-edit-btn:active {
            background: #155d27;
        }
        .profile-edit-form input[type="file"] {
            padding: 0;
        }
        .profile-edit-form input,
        .profile-edit-form button {
            margin-top: 8px;
        }
        .profile-info-fields {
            flex: 1;
        }
        ::-webkit-scrollbar {width: 9px;}
        ::-webkit-scrollbar-thumb {background: #1c6e34; border-radius: 5px;}
        ::-webkit-scrollbar-track {background: #daf5d7;}
    </style>
</head>
<body>
<!-- Attendance for All (Visible to Everyone) -->
<div class="container wide-container hidden" id="allAttendanceContainer">
    <h2>All Students' Attendance Records</h2>
    <div class="dashboard-links" style="margin-bottom:8px;">
        <button id="printAttendanceBtn" style="width:auto;background:#208b3a;color:#fff;padding:8px 18px;margin-bottom:8px;border-radius:6px;font-size:15px;border: none;cursor:pointer;box-shadow:0 2px 6px rgba(19,78,26,0.10);">
            Print All Attendance Report
        </button>
    </div>
    <div id="allAttendanceRecords"></div>
    <div class="dashboard-links">
        <a id="backToDashboard" href="#">Back to Dashboard</a>
        <a id="logoutAllAttendance" href="#">Logout</a>
    </div>
</div>

<!-- Registration Page -->
<div class="container" id="registerContainer">
    <h2>Create Your Profile</h2>
    <form id="registerForm" autocomplete="off">
        <label for="fullName">Full Name <span style="color:red">*</span></label>
        <input type="text" id="regFullName" name="fullName" required autocomplete="off">

        <label for="regNumber">Registration Number <span style="color:red">*</span></label>
        <input type="text" id="regRegNumber" name="regNumber" required autocomplete="off">

        <label for="course">Course of Study <span style="color:red">*</span></label>
        <input type="text" id="regCourse" name="course" required autocomplete="off">

        <label for="fieldOfStudy">Field of Study <span style="color:red">*</span></label>
        <input type="text" id="regField" name="fieldOfStudy" required autocomplete="off">

        <label for="regPassword">Create Password <span style="color:red">*</span></label>
        <input type="password" id="regPassword" name="password" required minlength="6" autocomplete="new-password">

        <label for="regConfirmPassword">Confirm Password <span style="color:red">*</span></label>
        <input type="password" id="regConfirmPassword" name="confirmPassword" required minlength="6" autocomplete="new-password">

        <div class="error hidden" id="registerError"></div>
        <button type="submit">Create Profile</button>
        <div class="dashboard-links">
            Already have a profile? <a id="toLogin">Login</a>
        </div>
    </form>
</div>

<!-- Login Page -->
<div class="container hidden" id="loginContainer">
    <h2>Login</h2>
    <form id="loginForm" autocomplete="off">
        <label for="loginRegNumber">Registration Number <span style="color:red">*</span></label>
        <input type="text" id="loginRegNumber" name="loginRegNumber" required autocomplete="off">

        <label for="loginPassword">Password <span style="color:red">*</span></label>
        <input type="password" id="loginPassword" name="loginPassword" required autocomplete="current-password">

        <div class="error hidden" id="loginError"></div>
        <button type="submit">Login</button>
        <div class="dashboard-links" style="margin-top:12px;">
            <span>No profile? <a id="toRegister">Create one</a></span><br>
            <span><a id="toForgotPassword" style="color:#208b3a;">Forgot Password?</a></span>
        </div>
    </form>
</div>

<!-- Forgot Password Page -->
<div class="container hidden" id="forgotPasswordContainer">
    <h2>Reset Password</h2>
    <form id="forgotPasswordForm" autocomplete="off">
        <label for="fpRegNumber">Registration Number <span style="color:red">*</span></label>
        <input type="text" id="fpRegNumber" required autocomplete="off">

        <label for="fpLastAttendance">Last Day of Attendance (format: MM/DD/YYYY or DD/MM/YYYY) <span style="color:red">*</span></label>
        <input type="text" id="fpLastAttendance" placeholder="e.g., 09/17/2025" required autocomplete="off">

        <label for="fpNewPassword">New Password <span style="color:red">*</span></label>
        <input type="password" id="fpNewPassword" required minlength="6" autocomplete="new-password">

        <label for="fpConfirmPassword">Confirm New Password <span style="color:red">*</span></label>
        <input type="password" id="fpConfirmPassword" required minlength="6" autocomplete="new-password">

        <div class="error hidden" id="forgotPasswordError"></div>
        <div class="success hidden" id="forgotPasswordSuccess"></div>
        <button type="submit">Reset Password</button>
        <div class="dashboard-links">
            <a id="fpBackToLogin">Back to Login</a>
        </div>
    </form>
</div>

<!-- Dashboard Page -->
<div class="container hidden" id="dashboardContainer">
    <div class="profile-section">
        <img id="profilePhoto" class="profile-photo" src="https://ui-avatars.com/api/?name=User" alt="Profile Photo">
        <div class="profile-info-fields">
            <span style="font-size:1.3em;font-weight:bold;color:#134e1a;" id="userName"></span>
            <br>
            <span id="userCourse"></span> | 
            <span id="userField"></span>
            <br>
            <span style="font-size:.96em;color:#178a42;">Reg No: <span id="userReg"></span></span>
        </div>
        <button class="profile-edit-btn" id="editProfileBtn" title="Edit Profile">Edit</button>
    </div>
    <form class="profile-edit-form hidden" id="profileEditForm" enctype="multipart/form-data" autocomplete="off">
        <label for="editFullName">Full Name</label>
        <input type="text" id="editFullName" required>
        <label for="editCourse">Course of Study</label>
        <input type="text" id="editCourse" required>
        <label for="editField">Field of Study</label>
        <input type="text" id="editField" required>
        <label for="editProfilePhoto">Profile Photo</label>
        <input type="file" id="editProfilePhoto" accept="image/*">
        <div class="error hidden" id="editProfileError"></div>
        <button type="submit" style="background:#134e1a;color:#fff;">Save Changes</button>
        <button type="button" id="cancelEditProfile" style="background:#e9f5e1;color:#178a42;">Cancel</button>
    </form>
    <div class="dashboard-links">
        <a id="markAttendanceLink" href="#">Mark Attendance</a> | 
        <a id="viewAttendanceLink" href="#">My Attendance</a> | 
        <a id="viewAllAttendanceLink" href="#">All Attendance</a> | 
        <a id="logoutBtn" href="#">Logout</a>
    </div>
    <div id="dashboardSection"></div>
</div>

<script>
// ... all your previous code above ... 

// Replace both logout functions as follows:
logoutBtn.onclick = function() {
    localStorage.removeItem('attendanceCurrentUser');
    dashboardContainer.classList.add('hidden');
    allAttendanceContainer.classList.add('hidden');
    registerContainer.classList.add('hidden');
    loginContainer.classList.remove('hidden');
};

logoutAllAttendance.onclick = function() {
    localStorage.removeItem('attendanceCurrentUser');
    allAttendanceContainer.classList.add('hidden');
    dashboardContainer.classList.add('hidden');
    registerContainer.classList.add('hidden');
    loginContainer.classList.remove('hidden');
};

// ... all your remaining code ...
</script>
</body>
</html>
